(()=>{var t="https://weblog.cdn-go.cn/sdk/v".concat("1.38.0","/"),e="".concat(t,"browser/browser.js");function r(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}function n(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||((n=n||Array.prototype.slice.call(e,0,o))[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))}var o=window&&window.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},i=window&&window.__spreadArray||function(t,e,r){if(r||2===arguments.length)for(var n,o=0,i=e.length;o<i;o++)!n&&o in e||((n=n||Array.prototype.slice.call(e,0,o))[o]=e[o]);return t.concat(n||Array.prototype.slice.call(e))};function a(t){return Object.prototype.toString.call(t)==="[object ".concat("Object","]")}function c(t){var e=new Set,r="Circular";try{return JSON.stringify(t,(function(t,n){if(a(n)||Array.isArray(n)){if(e.has(n))return'["'.concat(r,'"]');e.add(n)}return n}))}catch(e){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];console.error.apply(console,i([],o(t),!1))}(e),a(t)?'{Object:["'.concat(r,'"]}'):Array.isArray(t)?'["'.concat(r,'"]'):r}}window&&window.__awaiter,window&&window.__generator,window&&window.__assign;var l,s=["debug","log","info","warn","error","fatal"],u="loader",h=Symbol("isProxy");function f(t,e){return"function"==typeof t[e]}g.prototype.getLogger=function(t){var e=Object.create(this,{namespace:{value:"".concat(u,"_").concat(t)}});return new Proxy(e,{get:this.getHandler.bind(e)})},g.prototype.init=function(t){return e=this,r=arguments,o=function(t,e){var r,n,o;return void 0===e&&(e={}),function(t,e){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=c(0),a.throw=c(1),a.return=c(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(c){return function(l){var s=[c,l];if(r)throw new TypeError("Generator is already executing.");for(;i=a&&s[a=0]?0:i;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,(s=o?[2&s[0],o.value]:s)[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!((o=0<(o=i.trys).length&&o[o.length-1])||6!==s[0]&&2!==s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3]))i.label=s[1];else if(6===s[0]&&i.label<o[1])i.label=o[1],o=s;else{if(!(o&&i.label<o[2])){o[2]&&i.ops.pop(),i.trys.pop();continue}i.label=o[2],i.ops.push(s)}}s=e.call(t,i)}catch(l){s=[6,l],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}}(this,(function(i){switch(i.label){case 0:if(this.initialized)throw new Error("SDK is already initialized");this.initialized=!0,r=e.sdkUrl||this.sdkUrl,i.label=1;case 1:return i.trys.push([1,4,,5]),[4,(a=r,new Promise((function(t){var e=document.createElement("script");e.async=!0,e.src=a,e.setAttribute("retry-when-error","true"),e.onload=function(){var e="log".split(".").reduce((function(t,e){return t[e]}),window);t(e)},(document.head||document.body).appendChild(e)})))];case 2:if("object"==typeof(n=i.sent())&&null!==n&&!0===n[h])throw new Error("Invalid SDK instance");return[4,n.init(t,e)];case 3:return i.sent(),this.client=n,this.flushPendingOperations(),[2,n];case 4:throw o=i.sent(),this.initialized=!1,new Error("Error initializing SDK: ".concat(o.message));case 5:return[2]}var a}))},new(n=(n=void 0)||Promise)((function(t,i){function a(t){try{l(o.next(t))}catch(t){i(t)}}function c(t){try{l(o.throw(t))}catch(t){i(t)}}function l(e){var r;e.done?t(e.value):((r=e.value)instanceof n?r:new n((function(t){t(r)}))).then(a,c)}l((o=o.apply(e,r||[])).next())}));var e,r,n,o},g.prototype.getHandler=function(t,e){return this.client&&f(this.client,e)?this.client[e].bind(this.client):f(t,e)?t[e].bind(t):this.createProxyMethod(e)},g.prototype.createProxyMethod=function(t){var e=this;return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new Promise((function(n,o){var i=e.isLogMethod(t)?Date.now():void 0;e.pendingOperations.push({method:t,argsString:c(r),timestamp:i,namespace:e.namespace,resolve:n,reject:o})}))}},g.prototype.flushPendingOperations=function(){if(!this.client)throw new Error("Client is not initialized");for(;0<this.pendingOperations.length;){var t=this.pendingOperations.shift(),e=t.method,r=t.argsString,n=t.timestamp,o=t.namespace,i=t.resolve,a=t.reject;try{var c=this.client.getLogger(o),l=(t=>{try{return JSON.parse(t)}catch(t){return[]}})(r),s=this.executeMethod(c,e,l,n);this.handleResult(s,i,a)}catch(t){a(t)}}},g.prototype.executeMethod=function(t,e,o,i){return this.isLogMethod(e)&&i?t[e].apply(t,n(n([],r(o),!1),[i],!1)):t[e].apply(t,n([],r(o),!1))},g.prototype.handleResult=function(t,e,r){t instanceof Promise?t.then(e).catch(r):e(t)},g.prototype.isLogMethod=function(t){return s.includes(t)};var p,d,y,w=g;function g(t,e){return void 0===e&&(e=u),this.sdkUrl=t,this.namespace=e,this[l]=!0,this.pendingOperations=[],this.initialized=!1,new Proxy(this,{get:this.getHandler.bind(this)})}l=h,p=e,y=null!=(d=window.log)?d:new w(p),window.log=y})();